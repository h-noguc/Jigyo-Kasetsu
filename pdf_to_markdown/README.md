# PDF to Markdown 変換ツール

PDFファイルからテキストを抽出し、構造化されたMarkdown形式に変換するPythonスクリプトです。

## 機能

- **テキスト抽出**: PDFからテキストを抽出
- **見出し自動判定**: フォントサイズに基づいて見出しレベル（H1〜H3）を自動判定
- **テーブル変換**: PDF内の表をMarkdownテーブル形式に変換
- **リスト検出**: 箇条書き・番号付きリストを検出してMarkdown形式に変換
- **太字検出**: 太字テキストを `**太字**` 形式に変換

## インストール

```bash
pip install pdfplumber
```

## 使い方

### 基本的な使用方法

```bash
python simple_pdf_to_markdown.py <入力ファイル.pdf> [出力ファイル.md]
```

### 例

```bash
# 出力ファイル名を自動生成（document.pdf → document.md）
python simple_pdf_to_markdown.py document.pdf

# 出力ファイル名を指定
python simple_pdf_to_markdown.py document.pdf output.md
```

## 対応するPDF形式

- **テキストベースPDF**: テキストを選択・コピーできるPDF
- ※ スキャンされたPDF（画像として保存されたPDF）には対応していません

## 見出し判定の仕組み

フォントサイズに基づいて見出しレベルを自動判定します：

| フォントサイズ比率 | 見出しレベル |
|-------------------|-------------|
| 本文の1.5倍以上   | # H1        |
| 本文の1.3倍以上   | ## H2       |
| 本文の1.15倍以上  | ### H3      |
| それ以下          | 本文        |

## リスト検出パターン

### 箇条書きリスト

以下の記号で始まる行を箇条書きとして検出：

- `•`, `・`, `●`, `○`, `◆`, `◇`, `▪`, `▫`, `■`, `□`, `►`, `▸`, `‣`, `⁃`
- `-`, `*`（半角スペースが続く場合）

### 番号付きリスト

以下のパターンで始まる行を番号付きリストとして検出：

- `1.`, `2.`, `3.` ...（ピリオド区切り）
- `1)`, `2)`, `3)` ...（括弧区切り）
- `(1)`, `(2)`, `(3)` ...（丸括弧）
- `①`, `②`, `③` ...（丸数字）

## テーブル変換

PDF内の表を自動検出し、Markdown形式に変換します：

```markdown
| 列1 | 列2 | 列3 |
| --- | --- | --- |
| データ1 | データ2 | データ3 |
| データ4 | データ5 | データ6 |
```

## 設定のカスタマイズ

`simple_pdf_to_markdown.py` 内の `CONFIG` 辞書を編集することで、
見出し判定の閾値やリスト検出パターンをカスタマイズできます：

```python
CONFIG = {
    'heading_size_ratio': {
        'h1': 1.5,   # 本文の1.5倍以上 → H1
        'h2': 1.3,   # 本文の1.3倍以上 → H2
        'h3': 1.15,  # 本文の1.15倍以上 → H3
    },
    # ...
}
```

## 制限事項

- スキャンされたPDF（画像PDF）には対応していません（OCRが必要）
- 複雑なレイアウト（多段組み、テキストボックスの重なりなど）は正確に再現できない場合があります
- 画像の抽出には対応していません
- 数式やグラフは抽出できません

## 依存ライブラリ

- [pdfplumber](https://github.com/jsvine/pdfplumber) - PDFテキスト・テーブル抽出
